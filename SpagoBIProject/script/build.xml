<project name="${project.name}" default="doc.all" basedir=".">
	
	<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
	<!--   DEFINIZIONE FILE DI PROPERTY						                            -->
	<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
	<property file="build.properties" />
	
	<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
	<!--   DEFINIZIONE CLASSPATH						                                            -->
	<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
	<path id="web.classpath">
		<pathelement path="${classpath}" />
		<!-- LIBRERIE SPECIFICHE APPLICATIVO  -->
		<fileset dir="${java.lib.dir}">
			<include name="**/*.jar" />
		</fileset>
		<!-- LIBRERIE ESTERNE DEL WEB CONTAINER necessarie per la compilazione -->
		<!-- ma che non devono essere comprese nel war                         -->
		<fileset dir="${project.runtime.dir}/lib">
			<include name="**/*.jar" />
		</fileset>
	</path>

	<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
	<!--   PULIZIA AMBIENTE						                                                -->
	<!--++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->
	<target name="doc.clean">
		<delete dir="${doc.dir}" />
	</target>
	<target name="doc.init" depends="doc.clean">
		<!-- Create the time stamp -->
		<tstamp />
		<!-- Create the build directory structure used by compile -->
		<mkdir dir="${doc.dir}" />
	</target>
	
	<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
	<!--   DOCUMENTTION										                            -->
	<!-- ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
	<target name="doc.all" depends="doc.init,doc.js,doc.java"/>
	
	<target name="doc.js">
		<exec command="${programs.jsduck} ${js.src.dir} --builtin-classes --warnings=-no_doc,-dup_member,-link_ambiguous --external XMLHttpRequest --output ${js.doc.dir}"/>
	</target>
	
	<target name="doc.java">
		<javadoc packagenames="*" sourcepath="${java.src.dir}" defaultexcludes="yes" destdir="${java.doc.dir}" author="true" version="true" use="true">
			<classpath refid="web.classpath" />
		</javadoc>
	</target>
	
</project>